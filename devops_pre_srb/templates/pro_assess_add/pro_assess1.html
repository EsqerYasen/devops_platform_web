<div class="tab-pane" id="tab1">
    <div class="row" style="margin-top: 20px;margin-bottom: 20px">
         <div class="col-md-6">
            <label class="col-sm-5 control-label" style="text-align: right">
                项目
            </label>
            <div class="col-sm-7">
                <div class="input-group">
{#                  <span class="input-group-addon">#}
{#                    <input id="newProjectRadio"  name="projectRadio" type="radio" value="0" aria-label="..." onclick="radioClick(1)" checked>#}
{#                  </span>#}
                    <input id="projectName" type="text" placeholder="中文名" value="{{ result.name }}" class="form-control projectInput" aria-label="..." {{ readonly }}>
	                <input id="projectNameEn" type="text" placeholder="英文名" value="{{ result.name_en }}" class="form-control projectInput" aria-label="..." {{ readonly }}>
                </div>
                <input type="hidden" id="project_id" value="{{ result.id }}"/>
                <input type="hidden" id="is_add" value="{{ is_add }}"/>
               <!--   <input type="text" class="form-control" id="projectName" value=""/> -->
            </div>
         </div>

    </div>


{#	<div class="row" style="margin-top: 20px;margin-bottom: 20px">#}
{##}
{#		 <div class="col-md-6">#}
{#            <label class="col-sm-5 control-label" style="text-align: right">#}
{#                已有项目#}
{#            </label>#}
{#            <div class="col-sm-7">#}
{#                <div class="input-group">#}
{#                    <span class="input-group-addon">#}
{#                        <input id="oldProjectRadio" name="projectRadio" type="radio" aria-label="..." value="1" onclick="radioClick(2)">#}
{#                    </span>#}
{#                    <select id="projectNameSel"  class="form-control" onchange="" disabled="disabled">#}
{#                        <option value="">--------请选择--------</option>#}
{#                    </select>#}
{#                </div>#}
{#            </div>#}
{#         </div>#}
{##}
{#	</div>#}


	<hr>




	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 项目简述
             </label>
             <div class="col-sm-7">
                <textarea id="description" maxlength="200" class="form-control" style="width: 100%;height: 70px;resize: none;background: white;color: black;" {{ readonly }}>{{ result.description }}</textarea>
             </div>
         </div>
    </div>


	<hr>


	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 申请人
             </label>
             <div class="col-sm-7">
	             <input type="text" id="applicant" class="form-control" value="{{ result.applicant }}"  readonly />
             </div>
         </div>
    </div>



	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 Email
             </label>
             <div class="col-sm-7">
                <input type="text" class="form-control" id="applicant_email" value="{{ result.applicant_email }}"/>
             </div>
         </div>
    </div>


	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 分机
             </label>
             <div class="col-sm-7">
                <input type="text" id="applicant_phone" class="form-control" value="{{ result.applicant_phone }}" {{ readonly }}/>
             </div>
         </div>
    </div>


	<hr>




	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 项目正式上线时间
             </label>
             <div class="col-sm-7">
	             <div class='input-group date'  id='datetimepicker1' style="width: 100%">
                    <input id="estimated_pilot_date" type='text' name="estimated_rollout_date1" value="{{ result.estimated_pilot_date }}" class="form-control" placeholder="预计上线时间" {{ readonly }}/>
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
             </div>
         </div>
    </div>



	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 需要运维介入时间
             </label>
             <div class="col-sm-7">
	             <div class='input-group date'  id='datetimepicker2'>
                    <input id="estimated_online_date" type='text' name="estimated_rollout_date2" value="{{ result.estimated_online_date }}" class="form-control" placeholder="预计上线时间" {{ readonly }}/>
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
             </div>
         </div>
    </div>


	<hr>



	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 预估架构能够承载的业务量
                 <br />
                 (订单量或请求数)
             </label>
             <div class="col-sm-7">
	             <div class='input-group date'  id='datetimepicker1' style="width: 100%">
                     <input id="estimated_total_capacity" type="number" class="form-control" placeholder="订单量或请求数"  value="{{ result.estimated_total_capacity }}" {{ readonly }}/>
                </div>
             </div>
         </div>
    </div>



	<div class="row" style="margin-bottom: 20px">
         <div class="col-md-6">
             <label class="col-sm-5 control-label" style="text-align: right">
                 预估每秒最高并发
                 <br />
                 (请求数)
             </label>
             <div class="col-sm-7">
	             <div class='input-group date'  id='datetimepicker2' style="width: 100%">
                    <input id="estimated_singleton_capacity" type="number" class="form-control" placeholder="请求数"  value="{{ result.estimated_singleton_capacity }}" {{ readonly }}/>
                </div>
             </div>
         </div>
    </div>


</div>

<script>

    function initProAssess1(){
        var now = new Date();
        now.setMonth(now.getMonth()+1);
        $('#datetimepicker1').datetimepicker({
            format: 'YYYY-MM-DD',
            locale: moment.locale('zh-cn'),
            defaultDate:now
        });
        now.setMonth(now.getMonth()+1);
        $('#datetimepicker2').datetimepicker({
            format: 'YYYY-MM-DD',
            locale: moment.locale('zh-cn'),
            defaultDate:now
        });
    }

    function radioClick(v){
        if(v == 1){
            $("#projectNameSel").attr("disabled",true);
            $(".projectInput").attr("disabled",false);
        }else{
            $("#projectNameSel").attr("disabled",false);
            $(".projectInput").attr("disabled",true);
        }
    }

    function tab1Save(){
        var type = {{ type }};
        if(type > 0){
            return true;
        }
        var p_id = $("#project_id").val();
        var name = $("#projectName").val();
        var nameEn = $("#projectNameEn").val();
        var is_legacy_project = $(":radio[name='projectRadio']:checked").val();
        var description = $("#description").val();
        var applicant = $("#applicant").val();
        var applicant_email = $("#applicant_email").val();
        var applicant_phone = $("#applicant_phone").val();
        var assignee = $("#assignee").val();
        var estimated_pilot_date = $("#estimated_pilot_date").val();
        var estimated_online_date = $("#estimated_online_date").val();
        var estimated_total_capacity = $("#estimated_total_capacity").val();
        var estimated_singleton_capacity = $("#estimated_singleton_capacity").val();
        var is_add = $("#is_add").val();

        var saveJson = {"is_legacy_project":is_legacy_project}
        var bool = true;
        if(is_add != 1){
            if(!p_id){
                Alertwin.alert({ message: "未获获取到更新主键"});
                bool = false;
                return bool;
            }
        }
        if(!name){
            Alertwin.alert({ message: "项目名称为空"});
            bool = false;
            return bool;
        }
        saveJson['name'] = name;
        if(!nameEn){
            Alertwin.alert({message:"项目英文名称为空"});
            bool = false;
            return bool;
        }
        saveJson['name_en'] = nameEn;
        if(!description){
            Alertwin.alert({ message: "项目简述为空"});
            bool = false;
            return bool;
        }
         saveJson['description'] = description;
        if(!applicant){
            Alertwin.alert({ message: "申请人为空"});
            bool = false;
            return bool;
        }
        saveJson['applicant'] = applicant;
        if(!applicant_email){
            Alertwin.alert({ message: "Email为空"});
            bool = false;
            return bool;
        }
        saveJson['applicant_email'] = applicant_email;
        if(!applicant_phone){
            Alertwin.alert({ message: "分机为空"});
            bool = false;
            return bool;
        }
        saveJson['applicant_phone'] = applicant_phone;
{#        if(!assignee){#}
{#            Alertwin.alert({ message: "指派人为空"});#}
{#            bool = false;#}
{#            return bool;#}
{#        }#}
{#        saveJson['assignee'] = assignee;#}
        if(!estimated_pilot_date){
            Alertwin.alert({ message: "项目正式上线时间"});
            bool = false;
            return bool;
        }
        saveJson['estimated_pilot_date'] = estimated_pilot_date;
        if(!estimated_online_date){
            Alertwin.alert({ message: "需要运维介入时间"});
            bool = false;
            return bool;
        }
        if(!estimated_total_capacity){
            Alertwin.alert({ message: "预估架构能够承载的业务量为空"});
            bool = false;
            return bool;
        }
        saveJson['estimated_total_capacity'] = estimated_total_capacity;
        if(!estimated_singleton_capacity){
            Alertwin.alert({ message: "预估架构能够承载的业务量为空"});
            bool = false;
            return bool;
        }
        saveJson['estimated_singleton_capacity'] = estimated_singleton_capacity;
        saveJson['estimated_online_date'] = estimated_online_date;
        var postUrl ="";

        if(p_id){
            saveJson['p_id'] = p_id;
            postUrl = "/presrb/project/"+p_id+"/edit/";
        }else{
            postUrl = "/presrb/project/add/";
        }

        if(postUrl){
            $.ajax({
                type: "POST",
                url: postUrl,
                async:false,
                data:{"saveJson":JSON.stringify(saveJson),"csrfmiddlewaretoken":'{{ csrf_token }}'},
                error: function (request) {
                     bool = false;
                },
                success: function (data) {
                    if(data.status == 0){
                        bool = true;
                        $("#project_id").val(data.p_id);
                        //Alertwin.alert({ message: "操作成功"});
                    }else{
                         bool = false;
                        Alertwin.alert({ message: "操作失败"});
                    }
                }
            })
        }
        return bool;
    }

</script>